default_connection: cockroachdb
connections:
  cockroachdb:
    arunit: &arunit
      min_messages: warning
      host: 127.0.0.1
      port: 26257
      user: root
      disable_cockroachdb_telemetry: true
      # `autocommit_before_ddl` changed to default true in CockroachDB v25.1.
      # This does not work with active record's test suite.
      #
      # This options keyword is referenced here in libpq:
      # https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-CONNECT-OPTIONS
      #
      # NOTE: with command lines or a URI, one could use `-c autocommit_before_ddl=false`
      variables:
        autocommit_before_ddl: false
    arunit_without_prepared_statements:
      <<: *arunit
      prepared_statements: false
    arunit2:
      <<: *arunit
